<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>Git Rebase IRL | Binota Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="IntroMany people might already known that there is a command call git rebase, but most of people don’t know how to use it right.This article will tell you some common cases that you can use git rebase">
<meta property="og:type" content="article">
<meta property="og:title" content="Git Rebase IRL">
<meta property="og:url" content="https://binota.org/blog/2018/09/25/Git-Rebase-IRL/index.html">
<meta property="og:site_name" content="Binota Blog">
<meta property="og:description" content="IntroMany people might already known that there is a command call git rebase, but most of people don’t know how to use it right.This article will tell you some common cases that you can use git rebase">
<meta property="og:locale" content="default">
<meta property="og:updated_time" content="2018-09-24T19:00:38.032Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Git Rebase IRL">
<meta name="twitter:description" content="IntroMany people might already known that there is a command call git rebase, but most of people don’t know how to use it right.This article will tell you some common cases that you can use git rebase">
  
    <link rel="alternate" href="/blog/atom.xml" title="Binota Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/blog/css/style.css">
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/blog/" id="logo">Binota Blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/blog/">Home</a>
        
          <a class="main-nav-link" href="/blog/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/blog/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://binota.org/blog"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-Git-Rebase-IRL" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/2018/09/25/Git-Rebase-IRL/" class="article-date">
  <time datetime="2018-09-24T17:52:33.000Z" itemprop="datePublished">2018-09-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Git Rebase IRL
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Intro"><a href="#Intro" class="headerlink" title="Intro"></a>Intro</h2><p>Many people might already known that there is a command call <code>git rebase</code>, but most of people don’t know how to use it right.<br>This article will tell you some common cases that you can use <code>git rebase</code> to make your commit flow more clearly.</p>
<blockquote>
<p>P.S. the man page of <code>git rebase</code> also provided a very clear document. if you want to learn more about <code>git rebase</code>, just read it :)</p>
</blockquote>
<h2 id="When-will-I-need-it"><a href="#When-will-I-need-it" class="headerlink" title="When will I need it?"></a>When will I need it?</h2><p>There is some common cases:</p>
<ol>
<li>To split one commit to two or more.</li>
<li>To rename/delete one or more commits.</li>
<li>To merge some commit into one.</li>
<li>To append bunch of commits into another branch.</li>
</ol>
<h2 id="Split-one-commit-to-two-or-more"><a href="#Split-one-commit-to-two-or-more" class="headerlink" title="Split one commit to two or more"></a>Split one commit to two or more</h2><p>Assume we have following commits:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ad99c7e initial commit</span><br><span class="line">fb89181 implement a feature and change the style</span><br><span class="line">7c189c8 remove bugs</span><br></pre></td></tr></table></figure>
<p>You might want to split your second commit into to commit, so every commit only do one things, that keeps git history atomic.  </p>
<p>First, we need to start a rebase, use <code>git rebase -i ad99c7e</code>. <code>-i</code> means interactively rebase.<br>The git rebase will use <code>ad99c7e</code> as a new base, think like rebase is to create a new branch, then we do some works on that branch. Once we have done our work, it destroy the original branch and use the new one to replace it. As a result, the hashes starting from <code>ad99c7e</code> will be changed.  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># git rebase -i ad99c7e</span><br></pre></td></tr></table></figure>
<p>Then, git will open the editor, showing up following content:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pick fb89181 implement a feature and change the style</span><br><span class="line">pick 7c189c8 remove bugs</span><br></pre></td></tr></table></figure></p>
<p>this file is called <code>git-rebase-todo</code>. we can now edit it to tell it how we want to do during rebasing.  </p>
<p>to split a commit, we need to edit it, so let’s change the <code>pick</code> to <code>edit</code> on first line, then save it and exit your text editor:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">edit fb89181 implement a feature and change the style</span><br><span class="line">pick 7c189c8 remove bugs</span><br></pre></td></tr></table></figure></p>
<p>now, git will stop at <code>fb89191</code> and waiting for you. try use <code>git status</code> to see what happened.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">interactive rebase in progress; onto fb89191</span><br><span class="line">You are currently editing a commit while rebasing branch &apos;master&apos; on &apos;fb89191&apos;.</span><br><span class="line">  (use &quot;git commit --amend&quot; to amend the current commit)</span><br><span class="line">  (use &quot;git rebase --continue&quot; once you are satisfied with your changes)</span><br></pre></td></tr></table></figure></p>
<p>to edit this commit, first we need to cancel it by using <code>git reset --soft HEAD</code>.<br>you can now use the combination of <code>git add</code>, <code>git rebase</code>, or <code>git commit</code> to create more commit.</p>
<p>once you have done, use <code>git rebase --continue</code> to continue.</p>
<p>afterall, you might notice that starting from <code>ad99c7e</code>, the hashes are different now, just like I explained above:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ad99c7e initial commit</span><br><span class="line">fb89181 implement a feature </span><br><span class="line">4434f2c change the style</span><br><span class="line">45fdb3a remove bugs</span><br></pre></td></tr></table></figure></p>
<h1 id="Merge-some-commit-into-one"><a href="#Merge-some-commit-into-one" class="headerlink" title="Merge some commit into one"></a>Merge some commit into one</h1><p>Assume we have following commits:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ad99c7e initial commit</span><br><span class="line">fb89181 implement a feature </span><br><span class="line">4434f2c change the style</span><br><span class="line">45fdb3a remove bugs</span><br></pre></td></tr></table></figure></p>
<p>What if I want to merge <code>45fdb3a</code> to <code>fb89181</code> to hide my mistake?</p>
<p>Let’s starting rebase by <code>git rebase -i ad99c7e</code> like we have done erlier:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">pick ad99c7e initial commit</span><br><span class="line">pick fb89181 implement a feature </span><br><span class="line">pick 4434f2c change the style</span><br><span class="line">pick 45fdb3a remove bugs</span><br></pre></td></tr></table></figure></p>
<p>This time, we need to use the command <code>squash</code>. The <code>squash</code> means to merge that commit into previous one:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">pick ad99c7e initial commit</span><br><span class="line">pick fb89181 implement a feature </span><br><span class="line">squash 45fdb3a remove bugs</span><br><span class="line">pick 4434f2c change the style</span><br></pre></td></tr></table></figure></p>
<p>By doing this, <code>45fdb3a</code> will be merged into <code>fb89191</code>. You might noticed that I changed the order of the commits. That’s okay to do it. You can always changing it’s order when rebasing, just be careful when conflict.<br>Save it and exit the editor. Then git will prompt the text editor again, to asking you the commit message the merged commit should have:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># This is a combination of 2 commits.</span><br><span class="line"># This is the 1st commit message:</span><br><span class="line"></span><br><span class="line">implement a feature </span><br><span class="line"></span><br><span class="line"># This is the commit message #2:</span><br><span class="line"></span><br><span class="line">remove bugs</span><br></pre></td></tr></table></figure></p>
<p>let’s hiding the second message. save and exit the text editor. and that’s all! we have successfully merged that two commits.</p>
<h1 id="To-rename-delete-one-or-more-commits"><a href="#To-rename-delete-one-or-more-commits" class="headerlink" title="To rename/delete one or more commits."></a>To rename/delete one or more commits.</h1><p>Let’s take following rebase todo for example:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">pick ad99c7e initial commit</span><br><span class="line">pick fb89181 implement a feature </span><br><span class="line">pick 4434f2c change the style</span><br><span class="line">pick 45fdb3a remove bugs</span><br></pre></td></tr></table></figure></p>
<p>To rename a commit, just use <code>reword</code>.<br>To delete a commit, just delete that line ;)</p>
<h1 id="Append-a-bunch-of-commits-into-another-branch"><a href="#Append-a-bunch-of-commits-into-another-branch" class="headerlink" title="Append a bunch of commits into another branch"></a>Append a bunch of commits into another branch</h1><p>That it a very common case if you are using some git workflow. When using gitflow workflow, for example, to fix a bug, there might be a branch <code>bugfix/fix-some-bugs</code> that borned from <code>master</code>. Then, the <code>master</code> keeps adding commits, <code>bugfix/fix-some-bugs</code> will have some commits too. Thus, there will be several commits ahead and also several commits behide <code>master</code>.<br>If we want to move the commits that only on <code>bugfix/fix-some-bugs</code> but now on <code>master</code> before we merge it to <code>master</code>, simply do <code>git rebase master</code> on <code>bugfix/fix-some-bugs</code>.<br>That’s very useful if you want to keep your history graph more clear. Keeping rebase to <code>master</code> can also avoiding make that branch too far away from <code>master</code>, because it might cause some conflict.</p>
<h1 id="Append-bunch-of-commits-into-another-branch-Part-2"><a href="#Append-bunch-of-commits-into-another-branch-Part-2" class="headerlink" title="Append bunch of commits into another branch - Part 2"></a>Append bunch of commits into another branch - Part 2</h1><p>At first, we made a branch <code>branchA</code> after <code>A</code>, then we committed <code>B</code> on master.<br>Continue, we made commit <code>C</code> and <code>D</code> on <code>branchA</code>. Then, we want to do a new feature based on <code>branchA</code>‘s work, so wo created new branch <code>branchB</code> just after <code>D</code>, then committed <code>E</code> on that branch.<br>To keep sync with <code>master</code>, so we did a <code>git rebase</code> on <code>branchA</code>.<br>Considering following diagram:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">         /---\   /---\</span><br><span class="line">---------| A |---| B |---</span><br><span class="line">  master \---/ | \---/  |         /---\   /---\</span><br><span class="line">               |        \---------| C |---| D |</span><br><span class="line">               |          branchA \---/   \---/</span><br><span class="line">               |         </span><br><span class="line">               |        /----\   /----\   /---\</span><br><span class="line">               \--------| C&apos; |---| D&apos; |---| E |</span><br><span class="line">                branchB \----/   \----/   \---/</span><br></pre></td></tr></table></figure></p>
<p>What if we want to keep sync <code>branchB</code> with <code>branchA</code>?<br>Since <code>branchA</code> has been rebased, the hashed of <code>C</code>, <code>D</code> will be different on <code>branchB</code>‘s, we marked it as <code>C&#39;</code> and <code>D&#39;</code>.<br>If we did <code>git rebase branchA</code> on <code>branchB</code>, the <code>C&#39;</code> and <code>D&#39;</code> will also be append to <code>branchA</code>.</p>
<p>For this cases, we need to use <code>git rebase onto</code>:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># # on branch `branchB`</span><br><span class="line"># git rebase --onto branchA &lt;D&apos;&apos;s hash&gt; HEAD</span><br></pre></td></tr></table></figure></p>
<p>This way, only <code>E</code> will be rebase onto <code>branchA</code>.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">         /---\   /---\</span><br><span class="line">---------| A |---| B |---</span><br><span class="line">  master \---/   \---/  |         /---\   /---\</span><br><span class="line">                        \---------| C |---| D |---\</span><br><span class="line">                          branchA \---/   \---/   |</span><br><span class="line">                                                  |         </span><br><span class="line">                                                  |        /---\</span><br><span class="line">                                                  \--------| E |</span><br><span class="line">                                                   branchB \---/</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://binota.org/blog/2018/09/25/Git-Rebase-IRL/" data-id="cjmgnqq9n0001ciq28z83iz10" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/blog/2018/09/25/hello-world/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Hello World</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2018/09/">September 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/blog/2018/09/25/Git-Rebase-IRL/">Git Rebase IRL</a>
          </li>
        
          <li>
            <a href="/blog/2018/09/25/hello-world/">Hello World</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 BinotaLIU<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/blog/" class="mobile-nav-link">Home</a>
  
    <a href="/blog/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/blog/fancybox/jquery.fancybox.css">
  <script src="/blog/fancybox/jquery.fancybox.pack.js"></script>


<script src="/blog/js/script.js"></script>



  </div>
</body>
</html>